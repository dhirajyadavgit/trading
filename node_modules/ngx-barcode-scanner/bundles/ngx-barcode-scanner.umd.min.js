!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@ericblade/quagga2"),require("lodash.defaultsdeep")):"function"==typeof define&&define.amd?define("ngx-barcode-scanner",["exports","@angular/common","@angular/core","@ericblade/quagga2","lodash.defaultsdeep"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-barcode-scanner"]={},e.ng.common,e.ng.core,e.Quagga,e.defaultsDeep)}(this,(function(e,t,n,r,a){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=o(r),s=o(a);function c(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;Object.create;var u={inputStream:{name:"Live",type:"LiveStream",target:null,constraints:{width:{min:640},height:{min:480},aspectRatio:{min:1,max:2},facingMode:"environment"},singleChannel:!1},locator:{patchSize:"medium",halfSample:!0},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]}},l=["code_128","code_39","code_39_vin","ean","ean_extended","ean_8","upc","upc_e","codabar","i2of5","2of5","code_93"];function p(e){if(!l.some((function(t){return t===e})))throw new Error("This barcode type '"+e+"' is not valid.")}function h(e){return e+"_reader"}var f=function(){function e(){this.maxWidth="100%",this.valueChanges=new n.EventEmitter,this.started=new n.EventEmitter,this._started=!1}return Object.defineProperty(e.prototype,"_maxWidth",{get:function(){return this.maxWidth?""+this.maxWidth:"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_maxHeight",{get:function(){return this.maxHeight?""+this.maxHeight:"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStarted",{get:function(){return this._started},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.stop()},e.prototype.ngOnChanges=function(e){this.restart()},e.prototype._init=function(){var e=this;return new Promise((function(t,n){var r;i.default.onProcessed((function(t){return e.onProcessed(t)})),i.default.onDetected((function(t){return e.onDetected(t)})),e.configQuagga=s.default({},e.config,u),e.configQuagga.inputStream.target=e.barcodeScanner.nativeElement,e.type&&(e.configQuagga.decoder.readers="string"==typeof(r=e.type)?(p(r),[h(r)]):r.map((function(e){return p(e),h(e)}))),e.deviceId&&(e.configQuagga.inputStream.constraints.deviceId=e.deviceId),i.default.init(e.configQuagga,(function(e){if(e)return console.log(e),n(e);t()}))}))},e.prototype.start=function(){return c(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this._started?[3,2]:[4,this._init()];case 1:e.sent(),i.default.start(),this._started=!0,this.started.next(!0),e.label=2;case 2:return[2]}}))}))},e.prototype.stop=function(){this._started&&(i.default.stop(),this._started=!1,this.started.next(!1))},e.prototype.restart=function(){this._started&&(this.stop(),this.start())},e.prototype.onProcessed=function(e){var t=i.default.canvas.ctx.overlay,n=i.default.canvas.dom.overlay;e&&(e.boxes&&(t.clearRect(0,0,parseInt(n.getAttribute("width"),10),parseInt(n.getAttribute("height"),10)),e.boxes.filter((function(t){return t!==e.box})).forEach((function(e){i.default.ImageDebug.drawPath(e,{x:0,y:1},t,{color:"green",lineWidth:2})}))),e.box&&i.default.ImageDebug.drawPath(e.box,{x:0,y:1},t,{color:"#00F",lineWidth:2}),e.codeResult&&e.codeResult.code&&i.default.ImageDebug.drawPath(e.line,{x:"x",y:"y"},t,{color:"red",lineWidth:3}))},e.prototype.onDetected=function(e){this.valueChanges.next(e)},e}();f.decorators=[{type:n.Component,args:[{selector:"barcode-scanner-livestream",template:'<div\n  #BarcodeScanner\n  class="scanner"\n  [hidden]="!isStarted"\n  [style.max-height]="_maxHeight"\n  [style.max-width]="_maxWidth"\n>\n  <video [style.max-height]="_maxHeight" [style.max-width]="_maxWidth"></video>\n  <canvas\n    [style.max-height]="_maxHeight"\n    [style.max-width]="_maxWidth"\n    class="drawingBuffer"\n  ></canvas>\n</div>\n',encapsulation:n.ViewEncapsulation.None,styles:[".scanner{position:relative}.scanner canvas,.scanner video{height:100%;width:100%}.scanner canvas.drawingBuffer{left:0;position:absolute;top:0}"]}]}],f.propDecorators={type:[{type:n.Input}],deviceId:[{type:n.Input}],maxWidth:[{type:n.Input}],maxHeight:[{type:n.Input}],config:[{type:n.Input}],valueChanges:[{type:n.Output}],started:[{type:n.Output}],barcodeScanner:[{type:n.ViewChild,args:["BarcodeScanner"]}]};var g=function(){};g.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[f],exports:[f]}]}];var m=function(){function e(){this._started=!1,this.width="90vw",this.maxWidth="640px",this.valueChanges=new n.EventEmitter,this.started=new n.EventEmitter,this._showScanner=!1}return Object.defineProperty(e.prototype,"isStarted",{get:function(){return this._started},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showScanner",{get:function(){return this._showScanner},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.scanner.stop()},e.prototype.show=function(){this._showScanner=!0,this.scanner.start()},e.prototype.hide=function(){this._showScanner=!1,this.scanner.stop()},e.prototype.onStarted=function(e){this._started=e,this.started.next(e)},e.prototype.onValueChanges=function(e){this.valueChanges.next(e)},e}();m.decorators=[{type:n.Component,args:[{selector:"barcode-scanner-livestream-overlay",template:'<div class="barcode-scanner-livestream-overlay" [hidden]="!showScanner">\n  <div\n    class="barcode-scanner-livestream-overlay-content"\n    [style.width]="width"\n    [style.max-width]="maxWidth"\n    [style.height]="height"\n    [style.max-height]="maxHeight"\n  >\n    <div\n      class="barcode-scanner-livestream-overlay-close"\n      *ngIf="isStarted"\n      (click)="hide()"\n    >\n      X\n    </div>\n    <barcode-scanner-livestream\n      [type]="type"\n      [deviceId]="deviceId"\n      [config]="config"\n      (valueChanges)="onValueChanges($event)"\n      (started)="onStarted($event)"\n    ></barcode-scanner-livestream>\n  </div>\n</div>\n',styles:[".barcode-scanner-livestream-overlay{background-color:rgba(0,0,0,.3);bottom:0;left:0;overflow:hidden;position:fixed;right:0;top:0;width:100%;z-index:1000}.barcode-scanner-livestream-overlay .barcode-scanner-livestream-overlay-content{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.barcode-scanner-livestream-overlay .barcode-scanner-livestream-overlay-content .barcode-scanner-livestream-overlay-close{background-color:#fff;border:2px solid #000;border-radius:2rem;box-sizing:initial;cursor:pointer;font-size:1.3rem;height:1.5rem;line-height:1.5rem;margin:-1rem;padding:.5rem;position:absolute;right:0;text-align:center;width:1.5rem;z-index:100}"]}]}],m.propDecorators={type:[{type:n.Input}],deviceId:[{type:n.Input}],width:[{type:n.Input}],maxWidth:[{type:n.Input}],height:[{type:n.Input}],maxHeight:[{type:n.Input}],config:[{type:n.Input}],valueChanges:[{type:n.Output}],started:[{type:n.Output}],scanner:[{type:n.ViewChild,args:[f]}]};var y=function(){};y.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,g],declarations:[m],exports:[m]}]}],e.BarcodeScannerLivestreamComponent=f,e.BarcodeScannerLivestreamModule=g,e.BarcodeScannerLivestreamOverlayComponent=m,e.BarcodeScannerLivestreamOverlayModule=y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-barcode-scanner.umd.min.js.map